(function(k,c){var h,a,f,i,j,e,d;c(function(){h=c("#comments");a=c("#form-comment");f=c("#ta-comment");f.ckeditor({toolbar:"BLOG",width:"95%",height:"200px",resize:!1});i=c("#tb-name");j=c("#tb-email");e=c("#btn-submit-comment");d=c("#status-comment");h.on("click",".delete",function(a){a.preventDefault();var b=c(this).parent(),a=parseInt(b.data("commentId"),10),g=b.html();confirm("Are you sure you want to delete this comment?")&&(b.html('<p>Deleting, please wait...&nbsp;<img src="/img/loading.gif" /></p>'), si.ajax("/webservices/wsBlog.asmx/deleteComment",JSON.stringify({commentId:a}),function(a){a&&a.d?"success"===a.d?(b.html("<p>The comment has been deleted.</p>"),setTimeout(function(){b.fadeOut(500,function(){b.remove()})},1E3)):(b.html("<p>Unable to delete comment, please try again.</p>"),setTimeout(function(){b.html(g)},1E3)):(b.html("<p>Unable to delete comment, please try again.</p>"),setTimeout(function(){b.html(g)},1E3))},function(){b.html("<p>Unable to delete comment, please try again.</p>"); setTimeout(function(){b.html(g)},1E3)}))});a.on("keydown","input",function(a){13===a.keyCode&&e.click()});e.on("click",function(e){e.preventDefault();var b=!1;""===c.trim(f.val())?(d.html('<p class="status-error">All fields are required.</p>'),f.focus()):(a.find("input:text").each(function(){var a=c(this),d=c.trim(a.val());""===d?(b=!0,a.addClass("error")):a.val(d).removeClass("error")}),b?(d.html('<p class=""status-error"">All fields are required.</p>'),a.find(".error").first().focus()):(a.find("input, button").attr("disabled", "disabled"),d.html('<p>Submitting comment, please wait...&nbsp;<img src="/img/loading.gif" /></p>'),si.ajax("/webservices/wsBlog.asmx/insertComment",JSON.stringify({blogId:si.blogId,commentBy:i.val(),email:j.val(),comment:f.val()}),function(b){if(b&&b.d)if(b=b.d,-1===b.indexOf("Error")){var e=c(b);a.before(e);Modernizr.csstransitions?setTimeout(function(){e.removeClass("out").addClass("in")},10):setTimeout(function(){e.removeClass("out").hide().fadeIn(1E3)},10);a.find("input").removeAttr("disabled").val("").end().find("button").removeAttr("disabled"); f.val("");d.html("")}else a.find("input, button").removeAttr("disabled"),d.html('<p class="status-error">'+b+"</p>");else a.find("input, button").removeAttr("disabled"),d.html('<p class="status-error">An error has occured. Please try again.</p>')},function(){a.find("input, button").removeAttr("disabled");d.html('<p class="status-error">An error has occured. Please try again.</p>')})))})})})(document,jQuery);